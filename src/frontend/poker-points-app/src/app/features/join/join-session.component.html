<main class="min-h-screen bg-gradient-to-br from-poker-green to-poker-felt flex flex-col items-center justify-center p-8">
  @if (isLoading()) {
    <div class="text-white text-xl">Loading...</div>
  } @else if (sessionNotFound()) {
    <!-- Session Not Found -->
    <div class="text-center max-w-md w-full">
      <div class="bg-white/10 backdrop-blur-sm rounded-xl p-8">
        <div class="text-6xl mb-4">404</div>
        <h2 class="text-2xl font-bold text-white mb-2">Game Not Found</h2>
        <p class="text-gray-300 mb-6">
          The game code <span class="font-mono font-bold">{{ sessionCode() }}</span> doesn't exist or has ended.
        </p>
        <button
          (click)="goBack()"
          class="w-full px-6 py-3 bg-poker-gold text-gray-900 font-semibold rounded-lg hover:bg-yellow-400 transition-colors"
        >
          Back to Home
        </button>
      </div>
    </div>
  } @else {
    <!-- Join Form -->
    <div class="text-center max-w-md w-full">
      @if (isNewSession()) {
        <div class="mb-6">
          <p class="text-gray-300 text-sm mb-1">Your game code is</p>
          <div class="text-5xl font-mono font-bold text-poker-gold tracking-widest">
            {{ sessionCode() }}
          </div>
          <p class="text-gray-400 text-sm mt-2">Share this code with your team</p>
        </div>
      } @else {
        <div class="mb-6">
          <p class="text-gray-300 text-sm mb-1">Joining game</p>
          <div class="text-4xl font-mono font-bold text-white tracking-widest">
            {{ sessionCode() }}
          </div>
        </div>
      }

      <div class="bg-white/10 backdrop-blur-sm rounded-xl p-6">
        <h2 class="text-xl font-semibold text-white mb-4">Enter Your Name</h2>

        <form (submit)="joinGame(); $event.preventDefault()" class="space-y-4">
          <div>
            <input
              type="text"
              [value]="displayName()"
              (input)="onNameInput($event)"
              placeholder="Your display name"
              maxlength="30"
              autofocus
              class="w-full px-4 py-3 rounded-lg border-2 border-transparent bg-white text-gray-900 text-center text-lg focus:border-poker-gold focus:outline-none"
            />
            @if (error()) {
              <p class="mt-2 text-red-300 text-sm">{{ error() }}</p>
            }
          </div>

          <!-- Observer Toggle -->
          <div class="flex items-center justify-center gap-3">
            <button
              type="button"
              (click)="toggleObserver()"
              class="relative w-12 h-6 rounded-full transition-colors"
              [class]="isObserver() ? 'bg-poker-gold' : 'bg-white/30'"
            >
              <span
                class="absolute top-1 w-4 h-4 rounded-full bg-white transition-transform"
                [class]="isObserver() ? 'left-7' : 'left-1'"
              ></span>
            </button>
            <span class="text-white">Join as observer</span>
            <span class="text-gray-400 text-sm">(no voting)</span>
          </div>

          <button
            type="submit"
            class="w-full px-6 py-3 bg-poker-gold text-gray-900 font-semibold rounded-lg shadow-lg hover:bg-yellow-400 transition-colors disabled:opacity-50"
            [disabled]="isJoining() || !displayName()"
          >
            @if (isJoining()) {
              Joining...
            } @else {
              Join Game
            }
          </button>
        </form>

        <button
          (click)="goBack()"
          class="mt-4 text-gray-400 hover:text-white text-sm transition-colors"
        >
          &larr; Back to home
        </button>
      </div>
    </div>
  }
</main>
